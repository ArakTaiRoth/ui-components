import {
  GoAModal,
  GoAModalActions,
  GoAModalContent,
  GoAModalTitle,
} from '../index.ts';
import { GoAButton } from '../../index';
import { action } from '@storybook/addon-actions';
import { DoDont } from '@abgov/shared/storybook-common';
import { useState } from 'react';

import {
  Meta,
  Preview,
  Story,
  ArgsTable,
  Description,
} from '@storybook/addon-docs/blocks';

<Meta
  title="Experimental/Components/Modal"
  component={GoAModal}
  argTypes={{
    title: {
      control: {
        type: 'text',
      },
    },
    content: {
      control: {
        type: 'text',
      },
    },
  }}
/>

# GoAModal

A dialog that appears on top of the main content and moves the system into a special mode requiring user interaction. This dialog disables the main content until the user explicitly interacts with the modal dialog.

## Overview

export const Template = (args) => {
  const [isOpen, setOpen] = useState(false);
  const [clickCount, setClickCount] = useState(0);
  return (
    <>
      <button onClick={() => setOpen(true)}>Open Modal</button>
      <GoAModal isOpen={isOpen} onClose={() => setOpen(false)}>
        <GoAModalTitle>{args.title}</GoAModalTitle>
        <GoAModalContent>{args.content}</GoAModalContent>
        <GoAModalActions>
          <GoAButton
            buttonType="tertiary"
            type="button"
            onClick={() => setOpen(false)}
          >
            Cancel
          </GoAButton>
          <GoAButton
            buttonType="primary"
            type="submit"
            onClick={() => {
              setClickCount(clickCount + 1);
              action('clicked save')(clickCount);
            }}
          >
            Save
          </GoAButton>
        </GoAModalActions>
      </GoAModal>
    </>
  );
};

export const NoCloseTemplate = (args) => {
  const [isOpen, setOpen] = useState(false);
  const [clickCount, setClickCount] = useState(0);
  return (
    <>
      <button onClick={() => setOpen(true)}>Open Modal</button>
      <GoAModal isOpen={isOpen}>
        <GoAModalTitle>{args.title}</GoAModalTitle>
        <GoAModalContent>{args.content}</GoAModalContent>
        <GoAModalActions>
          <GoAButton
            buttonType="tertiary"
            type="button"
            onClick={() => setOpen(false)}
          >
            Cancel
          </GoAButton>
          <GoAButton
            buttonType="primary"
            type="submit"
            onClick={() => {
              setOpen(false);
              setClickCount(clickCount + 1);
              action('clicked save')(clickCount);
            }}
          >
            Save
          </GoAButton>
        </GoAModalActions>
      </GoAModal>
    </>
  );
};

#### Basic

<Canvas>
  <Story
    name="No Close Icon"
    height={200}
    args={{
      title: 'Show a little bit of text',
      content:
        'You can only close this modal if an action button toggles the state',
    }}
  >
    {NoCloseTemplate.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Short Modal"
    height={200}
    args={{
      title: 'Show a little bit of text',
      content:
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Modal with scrolling"
    height={200}
    args={{
      title: 'Show lots of text',
      content: `
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        `,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Examples

```html
<GoAModal isOpen={isOpen} onClose={() => setIsOpen(false)}>
  <GoAModalTitle>Form</GoAModalTitle>
  <GoAModalContent>
    <GoAForm>
      <GoAFormItem>
        <label>Name</label>
        <input type="text" name="name" />
      </GoAFormItem>
      <GoAFormItem>
        <label>Description</label>
        <textarea name="description" />
      </GoAFormItem>
    </GoAForm>
  </GoAModalContent>
  <GoAModalActions>
    <GoAButton buttonType="tertiary" type="button" onClick={() => setIsOpen(false)}>
      Cancel
    </GoAButton>
    <GoAButton buttonType="primary" type="submit">
      Save
    </GoAButton>
  </GoAModalActions>
</GoAModal>
```

## Properties

<Description of={GoAModal} />
<ArgsTable of={GoAModal} />

## Usage guidelines

The modal is designed having three sections, a title, content and actions. The action section should contain any buttons or other controls
that require user interaction, however if necessary they can be placed in the content section and require the user to scroll the bottom
before they can be seen.

### Modal content

<DoDont
  dos={'Try to keep titles short and concise'}
  donts={'Have long hard to read titles'}
/>

<DoDont
  dos={'Try to keep titles short and concise'}
  donts={'Have long hard to read titles'}
/>

<DoDont
  dos={'Avoid unnecessary markup within the content section'}
  donts={'Insert h1, h2, h2 tags within the content section'}
/>
