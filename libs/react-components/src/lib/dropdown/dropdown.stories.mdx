import {
  Meta,
  Canvas,
  Story,
  Description,
  ArgsTable,
} from '@storybook/addon-docs/blocks';
import { GoAIcon, GoAFormItem } from '../../experimental';
import { GoADropdown, GoADropdownOption, GoADropdownGroup } from './dropdown';
import { GoAButton } from '../..';
import { useState } from 'react';
import { action } from '@storybook/addon-actions';
import { BestPractices, BestPracticeItem } from '@abgov/shared/storybook-common';

<Meta
  title="React/Basic Elements/Dropdown"
  component={GoADropdown}
  argTypes={{
    name: {
      description: 'Name of the bound field',
    },
    selectedValues: {
      description: 'Array of the values bound to the component',
    },
    onChange: {
      description: 'Callback function invoked when an item is selected or unselected.',
    },
    disabled: {
      description: 'Indicates if the dropdown is disabled.',
    },
    leadingIcon: {
      description: 'Icon that sits to the left of the component field name',
    },
    multiSelect: {
      description: 'BETA feature: Allow for selection of more than one item',
    },
  }}
/>

export const Template = (args) => {
  const [selectedValues, setValues] = useState(args.selectedValues);
  function onChange(name, values) {
    setValues(values);
  }
  return (
    <div style={{ backgroundColor: '#eee', padding: '2rem', width: '400px' }}>
      <div>Selected Values: {`[${selectedValues.join(', ')}]`}</div>
      <GoADropdown {...args} onChange={onChange} selectedValues={selectedValues}>
        <label>Some Label</label>
        <GoADropdownOption label="Option 1" value="option1" />
        <GoADropdownOption label="Worst Actor Ever" value="option2">
          <div style={{ display: 'flex', alignItems: 'center' }}>
            <img
              height="40"
              width="40"
              style={{ borderRadius: '50%' }}
              src="https://www.placecage.com/40/40"
            />
            <span style={{ paddingLeft: '8px' }}>Nicholas Cage</span>
          </div>
        </GoADropdownOption>
        <GoADropdownOption label="Option 3" value="option3" />
        <hr />
        <GoADropdownOption label="Option 4" value="option4" />
        <GoADropdownOption label="Option 5" value="option5" />
        <GoADropdownOption label="Option 6" value="option6" />
      </GoADropdown>
    </div>
  );
};

<Canvas>
  <Story
    name="Basic"
    height="500px"
    args={{
      selectedValues: ['option1'],
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

export const FormTemplate = (args) => {
  // define the form state
  const [formValues, setFormValues] = useState({
    favColour: ''
  });
  // single callback function to set the state
  function onChange(name, values) {
    setFormValues({ ...formValues, [name]: values });
  }
  return (
    <div style={{ backgroundColor: '#eee', padding: '2rem', width: '400px' }}>
      <GoAForm>
        <GoAFormItem>
          <label>Favourite Colour</label>
          <GoADropdown
            {...args}
            name="favColour"
            onChange={onChange}
            selectedValues={formValues['favColour']}
          >
            <GoADropdownOption label="Red" value="red" />
            <GoADropdownOption label="Blue" value="blue" />
            <GoADropdownOption label="Yellow" value="yellow" />
            <GoADropdownOption disabled={true} label="Purple (disabled)" value="purple" />
          </GoADropdown>
        </GoAFormItem>
        <GoAFormActions>
          <GoAButton onClick={() => action('onClick')(formValues)}>
            Submit
          </GoAButton>
        </GoAFormActions>
      </GoAForm>
    </div>
  );
};

<Canvas>
  <Story name="Form" height="300px">
    {FormTemplate.bind({})}
  </Story>
</Canvas>

## Examples

```tsx
export const Template = (args) => {
  const [selectedValues, setValues] = useState(args.selectedValues);
  function onChange(name, values) {
    setValues(values);
  }
  return (
    <>
      <GoADropdown {...args} onChange={onChange} selectedValues={selectedValues}>
        <label>Some Label</label>
        <GoADropdownOption label="Option 1" value="option1" />
        <GoADropdownOption label="Option 2" value="option2" />
        <GoADropdownOption label="Option 3" value="option3" />
        <hr />
        <GoADropdownOption label="Option 4" value="option4" />
        <GoADropdownOption label="Option 5" value="option5" />
        <GoADropdownOption label="Option 6" value="option6" />
      </GoADropdown>
    </>
  );
};
```

## Properties

<Description of={GoADropdown} />
<ArgsTable of={GoADropdown} />

<Description of={GoADropdownOption} />
<ArgsTable of={GoADropdownOption} />

<BestPractices>
  <BestPracticeItem description="When dealing with 5 or less options, consider using radio buttons instead of a dropdown list" />
</BestPractices>
