import { Meta, Story } from '@storybook/addon-docs';
import { Tabs, Tab, CodeSnippet, SupportInfo, Markdown } from '@abgov/shared/storybook-common';
import { GoADropdown, GoADropdownOption } from '@abgov/react-components';
import { useState } from 'react';

<Meta title="Components/Dropdown" />

# Dropdown

### Dropdowns hide a long list of options, arranged vertically. A single select menu list is revealed upon intercation with this component.

[Figma design component](https://www.figma.com/file/3pb2IK8s2QUqWieH79KdN7/%E2%9D%96-Components-%7C-DIO-DS?node-id=700%3A7316)

---

export const Template = (args) => {
  const [value, setValue] = useState('green');
  function onChange(name, value) {
    console.log(name, value)
    setValue(value);
  }
  return (
    <GoADropdown {...args} name={args.name} value={value} onChange={onChange}>
      <GoADropdownOption name={args.name} value="red" label="Red" />
      <GoADropdownOption name={args.name} value="green" label="Green" />
      <GoADropdownOption name={args.name} value="blue" label="Blue" />
    </GoADropdown>
  )
}

#### Basic

<Story name="Basic" args={{ name: "basic" }}>
  { Template.bind() }
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet lang="html" code={`
      <goa-dropdown id="dropdown" name="colors">
        <goa-dropdown-item value="red" name="colors" label="Red" />
        <goa-dropdown-item value="green" name="colors" label="Green" />
        <goa-dropdown-item value="blue" name="colors" label="Blue" />
      </goa-dropdown>
    `}/>
    <CodeSnippet lang="js" code={`
      var dropdown = document.getElementById("dropdown");
      dropdown.addEventListener("_change", e => {
        console.log("_change", e.detail);
        dropdown.setAttribute("value", e.detail.value);
      });
    `}/>
  </Tab>
  <Tab label="Angular">
    <CodeSnippet lang="html" code={`
      <goa-dropdown name="colors"
          [value]="selectedColor"
          (_change)="selectColor($event)">
          <goa-dropdown-item
            name="colors"
            *ngFor="let color of colors"
            [value]="color"
            [label]="color"
          >
          </goa-dropdown-item>
      </goa-dropdown>
    `}/>
    <CodeSnippet lang="js" code={`
      export class MyComponent {
        colors: string[] = ['red', 'green', 'blue'];
        selectedColor: string = 'red';
        selectColor(event: any) {
          this.selectedColor = event.detail.value;
        }
      }
    `}/>
  </Tab>
  <Tab label="React">
    <CodeSnippet lang="tsx" code={`
      const [value, setValue] = useState('green');
      function onChange(name, value) {
        setValue(value);
      }
      return (
        <GoADropdown name="colors" value={value} onChange={onChange}>
          <GoADropdownOption name="colors" value="red" label="Red" />
          <GoADropdownOption name="colors" value="green" label="Green" />
          <GoADropdownOption name="colors" value="blue" label="Blue" />
        </GoADropdown>
      )
    `}/>
  </Tab>
</Tabs>


#### Error
<Story name="Error" args={{ name: "error", error: true }}>
  { Template.bind() }
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet lang="html" code={`
      <goa-dropdown id="dropdown" name="colors" error="true">
        <goa-dropdown-item value="red" name="colors" label="Red" />
        <goa-dropdown-item value="green" name="colors" label="Green" />
        <goa-dropdown-item value="blue" name="colors" label="Blue" />
      </goa-dropdown>
    `}/>
  </Tab>
  <Tab label="Angular">
    <CodeSnippet lang="html" code={`
      <goa-dropdown name="colors" error="true">
        <goa-dropdown-item value="red" name="colors" label="Red"></goa-dropdown-item>
        <goa-dropdown-item value="green" name="colors" label="Green"></goa-dropdown-item>
        <goa-dropdown-item value="blue" name="colors" label="Blue"></goa-dropdown-item>
      </goa-dropdown>
    `}/>
  </Tab>
  <Tab label="React">
    <CodeSnippet lang="tsx" code={`
      <GoADropdown name="colors" error={true} value={value} onChange={() => {}}>
        <GoADropdownOption name="colors" value="red" label="Red" />
        <GoADropdownOption name="colors" value="green" label="Green" />
        <GoADropdownOption name="colors" value="blue" label="Blue" />
      </GoADropdown>
    `}/>
  </Tab>
</Tabs>

---

<SupportInfo />
